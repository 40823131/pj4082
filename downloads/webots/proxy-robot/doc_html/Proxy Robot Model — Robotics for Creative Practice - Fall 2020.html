<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Proxy Robot Model — Robotics for Creative Practice - Fall 2020</title>
    <link rel="stylesheet" href="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/haiku.css" type="text/css">
    <link rel="stylesheet" href="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/pygments.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/graphviz.css">
    <link rel="stylesheet" href="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/guide.css" type="text/css">
    <script id="documentation_options" data-url_root="../" src="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/documentation_options.js"></script>
    <script src="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/jquery.js"></script>
    <script src="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/underscore.js"></script>
    <script src="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/doctools.js"></script>
    <script src="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/language_data.js"></script>
    <link rel="index" title="Index" href="https://courses.ideate.cmu.edu/16-375/f2020/text/genindex.html">
    <link rel="search" title="Search" href="https://courses.ideate.cmu.edu/16-375/f2020/text/search.html">
    <link rel="next" title="Sample Code Documentation" href="https://courses.ideate.cmu.edu/16-375/f2020/text/code/index.html">
    <link rel="prev" title="Delegate Robot Model" href="https://courses.ideate.cmu.edu/16-375/f2020/text/simulations/delegate.html"> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="https://courses.ideate.cmu.edu/16-375/f2020/text/index.html">
          <span>Robotics for Creative Practice - Fall 2020</span></a></h1>
        <h2 class="heading"><span>Proxy Robot Model</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&nbsp;&nbsp;<a href="https://courses.ideate.cmu.edu/16-375/f2020/text/simulations/delegate.html">Delegate Robot Model</a>
        &nbsp;&nbsp;::&nbsp;&nbsp;
        <a class="uplink" href="https://courses.ideate.cmu.edu/16-375/f2020/text/index.html">Contents</a>
        &nbsp;&nbsp;::&nbsp;&nbsp;
        <a href="https://courses.ideate.cmu.edu/16-375/f2020/text/code/index.html">Sample Code Documentation</a>&nbsp;&nbsp;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="proxy-robot-model">
<span id="proxy-model"></span><h1><a class="toc-backref" href="#id3">Proxy Robot Model</a><a class="headerlink" href="#proxy-robot-model" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">proxy</span></code> robot model is a simplification of the <code class="docutils literal notranslate"><span class="pre">wobbly</span></code> two-wheeled
robot intended for displaying the position of a remote robot using the
<code class="docutils literal notranslate"><span class="pre">delegate</span></code> robot model.  The body has no actuators, sensors, or physics.  It
does participate in collisions, acting like a fixed rigid body.</p>
<p>The model appears in the ‘party’ project available as a zip file
<a class="reference external" href="https://courses.ideate.cmu.edu/16-375/f2020/zip/party.zip">party.zip</a>.</p>
<div class="figure align-center" id="id2" style="width: 40%">
<a class="reference internal image-reference" href="https://courses.ideate.cmu.edu/16-375/f2020/text/_images/proxy-sim.jpg"><img alt="../_images/proxy-sim.jpg" src="Proxy%20Robot%20Model%20%E2%80%94%20Robotics%20for%20Creative%20Practice%20-%20Fall%202020_files/proxy-sim.jpg" style="width: 100%;"></a>
<p class="caption"><span class="caption-text">Screenshot of Webots model of a diff-drive ‘proxy’ robot.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#proxy-robot-model" id="id3">Proxy Robot Model</a></p>
<ul>
<li><p><a class="reference internal" href="#proxy-proto" id="id4">proxy.proto</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="proxy-proto">
<h2><a class="toc-backref" href="#id4">proxy.proto</a><a class="headerlink" href="#proxy-proto" title="Permalink to this headline">¶</a></h2>
<p>The robot model has been encapsulated in a .proto file for easy reuse.  The
model includes user-accessible scaling and color parameters.</p>
<div class="highlight-console notranslate"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">#</span>VRML_SIM R2020b utf8
<span class="gp">#</span> Proxy robot body to represent a remote robot, based on the wobbly robot body.
<span class="gp">#</span> This robot has no physics but is positioned by a delegate in response to
<span class="gp">#</span> position data reported over the network.
<span class="gp">#</span> documentation url: https://courses.ideate.cmu.edu/16-375
<span class="gp">#</span> license: No copyright, <span class="m">2020</span> Garth Zeglin.  This file is explicitly placed in the public domain.
<span class="go">PROTO proxy [</span>
<span class="go">  field SFVec3f    translation  0 0 0</span>
<span class="go">  field SFRotation rotation     0 1 0 0</span>
<span class="go">  field SFString   controller   ""</span>
<span class="go">  field SFString   name         "proxy"</span>
<span class="go">  field SFFloat    wheelRadius  0.1</span>
<span class="go">  field SFFloat    axleLength   0.14</span>
<span class="go">  field SFColor    bodyColor    0.8 0.8 0.8</span>
<span class="go">  field SFColor    wheelColor   0.3 0.3 0.3</span>
<span class="go">  field SFString   customData   ""</span>
<span class="go">]</span>
<span class="go">{</span>
<span class="go">  Robot {</span>
<span class="gp">    #</span> connect properties to user-visible data fields
<span class="go">    translation IS translation</span>
<span class="go">    rotation IS rotation</span>
<span class="go">    controller IS controller</span>
<span class="go">    name IS name</span>
<span class="go">    customData IS customData</span>

<span class="gp">    #</span> calculate derived parameters
<span class="gp">    %</span><span class="o">{</span>
<span class="go">      local counterweightHeight = fields.wheelRadius.value</span>
<span class="go">      local counterweightOffset = 0.75*fields.wheelRadius.value</span>
<span class="go">      local counterweightTop    = 1.25*fields.wheelRadius.value</span>
<span class="go">      local sensorHeight        = 3*fields.wheelRadius.value</span>
<span class="go">      local stalkHeight         = sensorHeight - counterweightTop</span>
<span class="go">      local stalkOffset         = counterweightTop + 0.5*stalkHeight</span>
<span class="go">    }%</span>

<span class="go">    children [</span>
<span class="gp">      #</span> The body group contains three cylinders: the massive counterweight at
<span class="gp">      #</span> bottom, a thin stalk rising above it, topped by the sensor disc.
<span class="gp">      #</span> All these shapes participate in collision<span class="p">;</span> the axle is kept separate
<span class="gp">      #</span> as it is just <span class="k">for</span> rendering.
<span class="go">      DEF bodyShape Group {</span>
<span class="go">        children [</span>
<span class="gp">          #</span> counterweight
<span class="go">          Transform {</span>
<span class="go">            translation 0 0 %{= counterweightOffset }%</span>
<span class="go">            rotation 1 0 0 1.5708</span>
<span class="go">            children [</span>
<span class="go">              Shape {</span>
<span class="go">                appearance DEF bodyAppearance PBRAppearance {</span>
<span class="go">                  baseColor IS bodyColor</span>
<span class="go">                  roughness 0.5</span>
<span class="go">                  metalness 0.5</span>
<span class="go">                }</span>

<span class="go">                geometry Cylinder {</span>
<span class="go">                  height %{= counterweightHeight }%</span>
<span class="go">                  radius 0.05</span>
<span class="go">                }</span>
<span class="go">              }</span>
<span class="go">            ]</span>
<span class="go">          }</span>
<span class="gp">  	  #</span> sensor disc
<span class="go">          Transform {</span>
<span class="go">            translation 0 0 %{= sensorHeight }%</span>
<span class="go">            rotation 1 0 0 1.5708</span>
<span class="go">            children [</span>
<span class="go">              Shape {</span>
<span class="go">                appearance USE bodyAppearance</span>
<span class="go">                geometry Cylinder {</span>
<span class="go">                  height 0.01</span>
<span class="go">                  radius 0.025</span>
<span class="go">                }</span>
<span class="go">              }</span>
<span class="go">            ]</span>
<span class="go">          }</span>
<span class="gp">	  #</span> stalk
<span class="go">          Transform {</span>
<span class="go">            translation 0 0 %{= stalkOffset }%</span>
<span class="go">            rotation 1 0 0 1.5708</span>
<span class="go">            children [</span>
<span class="go">              Shape {</span>
<span class="go">                appearance USE bodyAppearance</span>
<span class="go">                geometry Cylinder {</span>
<span class="go">                  height %{= stalkHeight }%</span>
<span class="go">                  radius 0.01</span>
<span class="go">                }</span>
<span class="go">              }</span>
<span class="go">            ]</span>
<span class="go">          }</span>
<span class="go">        ]</span>
<span class="go">      }</span>
<span class="gp">      #</span> Visible axle shape, not part of the boundingObject.
<span class="go">      DEF axleShape Transform {</span>
<span class="go">        translation 0 0 %{= fields.wheelRadius.value }%</span>
<span class="go">        children [</span>
<span class="go">          Shape {</span>
<span class="go">            appearance USE bodyAppearance</span>
<span class="go">            geometry Cylinder {</span>
<span class="go">              height %{= fields.axleLength.value + 0.02 }%</span>
<span class="go">              radius 0.005</span>
<span class="go">            }</span>
<span class="go">          }</span>
<span class="go">        ]</span>
<span class="go">      }</span>
<span class="gp">      #</span> Define the left wheel axis, pointing in the +Y direction along the axle.
<span class="go">      HingeJoint {</span>
<span class="go">        jointParameters HingeJointParameters {</span>
<span class="go">          axis 0 1 0</span>
<span class="go">          anchor 0 0 %{= fields.wheelRadius.value }%</span>
<span class="go">        }</span>
<span class="gp">	#</span> Define the left wheel solid, offset along +Y along the axle.
<span class="go">        endPoint DEF leftWheel Solid {</span>
<span class="go">          translation 0 %{= 0.5*fields.axleLength.value }% %{= fields.wheelRadius.value }%</span>
<span class="go">          rotation 0 -1 0 0</span>
<span class="go">          children [</span>
<span class="gp">            #</span> Define the left wheel shape and appearance, which is used by the right wheel solid.
<span class="go">            DEF wheelShape Transform {</span>
<span class="go">              rotation 0 0 1 0</span>
<span class="go">              children [</span>
<span class="go">                Shape {</span>
<span class="go">                  appearance PBRAppearance {</span>
<span class="go">                    baseColor IS wheelColor</span>
<span class="go">                    roughness 0.5</span>
<span class="go">                    metalness 0.5</span>
<span class="go">                  }</span>
<span class="go">                  geometry Cylinder {</span>
<span class="go">                    height 0.01</span>
<span class="go">                    radius %{= fields.wheelRadius.value }%</span>
<span class="go">                  }</span>
<span class="go">                }</span>
<span class="go">              ]</span>
<span class="go">            }</span>
<span class="go">          ]</span>
<span class="go">          name "left wheel"</span>
<span class="go">          boundingObject USE wheelShape</span>
<span class="go">        }</span>
<span class="go">      }</span>
<span class="gp">      #</span> Define the right wheel axis, also pointing in the +Y direction along the axle
<span class="gp">      #</span> so positive wheel rotations will move forward.
<span class="go">      HingeJoint {</span>
<span class="go">        jointParameters HingeJointParameters {</span>
<span class="go">          axis 0 1 0</span>
<span class="go">          anchor 0 0 %{= fields.wheelRadius.value }%</span>
<span class="go">        }</span>
<span class="gp">	#</span> Define the right wheel solid, offset along -Y along the axle.
<span class="gp">	#</span> The wheel shape is inherited from the left wheel.
<span class="go">        endPoint DEF rightWheel Solid {</span>
<span class="go">          translation 0 %{= -0.5*fields.axleLength.value }% %{= fields.wheelRadius.value }%</span>
<span class="go">          rotation 0 0 1 3.14159</span>
<span class="go">          children [</span>
<span class="go">            USE wheelShape</span>
<span class="go">          ]</span>
<span class="go">          name "right wheel"</span>
<span class="go">          boundingObject USE wheelShape</span>
<span class="go">        }</span>
<span class="go">      }</span>
<span class="go">    ] # close children list of Robot</span>
<span class="go">    boundingObject USE bodyShape</span>
<span class="go">  } # close Robot</span>
<span class="go">}</span>
</pre></div>
</td></tr></tbody></table></div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&nbsp;&nbsp;<a href="https://courses.ideate.cmu.edu/16-375/f2020/text/simulations/delegate.html">Delegate Robot Model</a>
        &nbsp;&nbsp;::&nbsp;&nbsp;
        <a class="uplink" href="https://courses.ideate.cmu.edu/16-375/f2020/text/index.html">Contents</a>
        &nbsp;&nbsp;::&nbsp;&nbsp;
        <a href="https://courses.ideate.cmu.edu/16-375/f2020/text/code/index.html">Sample Code Documentation</a>&nbsp;&nbsp;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        © Copyright 2020, Garth Zeglin. Licensed under <a class="reference external" href="http://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a>.
      Last updated on 2021-01-26.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.4.
    <a class="reference external" href="https://www.cmu.edu/legal/">University legal notice</a>.
    </div>
  
</body></html>